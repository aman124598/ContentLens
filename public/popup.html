<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ContentLens</title>
  <link rel="stylesheet" href="popup.css" />
</head>

<body>
  <div class="popup">
    <!-- Header -->
    <header class="header">
      <div class="header__brand">
        <span class="header__icon">ğŸ”</span>
        <div class="header__titles">
          <h1 class="header__name">ContentLens</h1>
          <p class="header__tagline">AI Reply Filter</p>
        </div>
      </div>
      <label class="toggle" title="Enable / Disable ContentLens">
        <input type="checkbox" id="masterToggle" />
        <span class="toggle__track">
          <span class="toggle__thumb"></span>
        </span>
      </label>
    </header>

    <div class="divider"></div>

    <div id="controls" class="controls">

      <section class="section">
        <label class="section__label" for="threshold">
          Detection Threshold
          <span class="badge" id="thresholdValue">7</span>
        </label>
        <input type="range" id="threshold" min="1" max="10" step="1" value="7" class="slider" />
        <div class="slider__labels">
          <span>1 â€“ More filtering</span>
          <span>10 â€“ Less filtering</span>
        </div>
      </section>

      <section class="section">
        <p class="section__label">Filter Mode</p>
        <div class="mode-grid">
          <label class="mode-btn">
            <input type="radio" name="mode" value="blur" />
            <span class="mode-btn__inner">
              <span class="mode-btn__icon">ğŸ‘</span>
              <span class="mode-btn__text">Blur</span>
            </span>
          </label>
          <label class="mode-btn">
            <input type="radio" name="mode" value="hide" />
            <span class="mode-btn__inner">
              <span class="mode-btn__icon">ğŸš«</span>
              <span class="mode-btn__text">Hide</span>
            </span>
          </label>
          <label class="mode-btn">
            <input type="radio" name="mode" value="highlight" />
            <span class="mode-btn__inner">
              <span class="mode-btn__icon">ğŸ”´</span>
              <span class="mode-btn__text">Highlight</span>
            </span>
          </label>
          <label class="mode-btn">
            <input type="radio" name="mode" value="badge" />
            <span class="mode-btn__inner">
              <span class="mode-btn__icon">ğŸ·</span>
              <span class="mode-btn__text">Badge</span>
            </span>
          </label>
        </div>
      </section>

      <section class="section section--domain">
        <!-- Allowlist mode toggle -->
        <div class="allowlist-row">
          <div class="allowlist-info">
            <span class="allowlist-info__icon">ğŸ›¡</span>
            <div>
              <span class="allowlist-info__label">Selected sites only</span>
              <p class="allowlist-info__sub" id="allowlistSub">Works on all sites</p>
            </div>
          </div>
          <label class="toggle toggle--sm" title="Only run on sites you enable">
            <input type="checkbox" id="allowlistToggle" />
            <span class="toggle__track">
              <span class="toggle__thumb"></span>
            </span>
          </label>
        </div>

        <!-- Current site row -->
        <div class="domain-row">
          <div class="domain-info">
            <span class="domain-info__icon">ğŸŒ</span>
            <span class="domain-info__host" id="currentHost">â€”</span>
          </div>
          <label class="toggle toggle--sm" title="Toggle scanning on this site">
            <input type="checkbox" id="domainToggle" checked />
            <span class="toggle__track">
              <span class="toggle__thumb"></span>
            </span>
          </label>
        </div>
        <p class="domain-hint" id="domainHint">Enable/disable ContentLens on this site</p>

        <!-- Enabled sites list -->
        <div id="enabledSitesList" class="enabled-sites hidden">
          <p class="enabled-sites__title">Active on:</p>
          <ul id="enabledSitesUl" class="enabled-sites__ul"></ul>
        </div>
      </section>

      <div class="stats-row">
        <span class="stat">
          <span class="stat__icon">ğŸ“¦</span>
          <span id="cacheCount">0</span> cached
        </span>
        <button class="link-btn" id="openOptions">âš™ Settings</button>
      </div>

    </div>

    <div id="disabledMsg" class="disabled-msg hidden">
      <span>ContentLens is <strong>off</strong></span>
      <p>Toggle the switch above to re-enable.</p>
    </div>

    <!-- License / Trial status bar -->
    <div id="licenseBar" class="license-bar hidden">
      <span id="licenseBarText"></span>
      <a id="licenseUpgradeBtn" href="#" target="_blank" rel="noopener" class="license-bar__cta hidden">
        Upgrade â€” $5
      </a>
    </div>

    <!-- License activation panel (shown when expired or to enter key) -->
    <div id="licensePanel" class="license-panel hidden">
      <p class="license-panel__title" id="licensePanelTitle">Activate your license</p>
      <p class="license-panel__sub" id="licensePanelSub">Enter your license key to unlock ContentLens.</p>
      <div class="license-input-row">
        <input type="text" id="licenseKeyInput" class="license-input" placeholder="XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"
          spellcheck="false" autocomplete="off" />
        <button id="licenseActivateBtn" class="license-activate-btn">Activate</button>
      </div>
      <p id="licenseError" class="license-error hidden"></p>
      <p id="licenseSuccess" class="license-success hidden"></p>
      <a id="licenseBuyBtn" href="#" target="_blank" rel="noopener" class="license-buy-btn">
        Get lifetime access â€” $5 â†’
      </a>
    </div>

  </div>

  <!-- â”€â”€ Auth wall (shown when not signed in) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="authWall" class="auth-wall hidden">
    <div class="auth-wall__logo">ğŸ”</div>
    <h2 class="auth-wall__title">ContentLens</h2>
    <p class="auth-wall__sub">Sign in to start your free 7-day trial</p>

    <!-- Tab switcher -->
    <div class="auth-tabs">
      <button class="auth-tab active" id="authTabLogin">Sign In</button>
      <button class="auth-tab" id="authTabSignup">Create Account</button>
    </div>

    <div class="auth-form">
      <input type="email" id="authEmail" class="auth-input" placeholder="Email address" autocomplete="email" />
      <input type="password" id="authPassword" class="auth-input" placeholder="Password"
        autocomplete="current-password" />
      <p id="authConfirmHint" class="auth-confirm-hint hidden">Choose a strong password (min 6 chars)</p>
      <button id="authSubmitBtn" class="auth-submit-btn">Sign In</button>
      <p id="authError" class="auth-error hidden"></p>
      <p id="authSuccess" class="auth-success hidden"></p>
    </div>
  </div>

  <script type="module" src="popup.js"></script>
</body>

</html>